# Environment Variables for Production Deployment
# Copy this file to .env.production and update with actual values

# ============================================
# APPLICATION
# ============================================
ENVIRONMENT=production
DEBUG=false
APP_VERSION=1.0.0

# ============================================
# DATABASE
# ============================================
# Full Database URL (used by SQLAlchemy)
DATABASE_URL=postgresql://ml_api_user:CHANGE_THIS_STRONG_PASSWORD_456@localhost:5432/minewise_db

# Individual connection parameters (fallback)
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_123
DB_HOST=localhost
DB_PORT=5432
DB_NAME=minewise_db
DB_USER=ml_api_user
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_456
DB_SCHEMA=public

# Connection Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_RECYCLE=3600

# ============================================
# MLFLOW
# ============================================
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_DB_PASSWORD=CHANGE_THIS_MLFLOW_PASSWORD_789
MLFLOW_BACKEND_STORE_URI=postgresql://mlflow:CHANGE_THIS_MLFLOW_PASSWORD_789@postgres:5432/mlflow
MLFLOW_DEFAULT_ARTIFACT_ROOT=./mlartifacts

# ============================================
# API SECURITY
# ============================================
# Generate strong API keys (at least 32 characters)
VALID_API_KEYS=prod-key-1234567890abcdef,prod-key-0987654321fedcba
API_KEY_SECRET=CHANGE_THIS_API_KEY_SECRET_32_CHARS_MIN
JWT_SECRET_KEY=CHANGE_THIS_JWT_SECRET_KEY_32_CHARS_MIN

# ============================================
# AWS/CLOUD (Optional - for model storage)
# ============================================
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=ap-southeast-1
S3_MODEL_BUCKET=mining-ml-models

# ============================================
# MONITORING
# ============================================
PROMETHEUS_ENABLED=true
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD

# ============================================
# ALERTING (Optional)
# ============================================
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
EMAIL_ALERTS_TO=ml-team@mining.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=alerts@mining.com
SMTP_PASSWORD=CHANGE_THIS_EMAIL_PASSWORD

# ============================================
# ERROR TRACKING (Optional - Sentry)
# ============================================
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================
# PERFORMANCE
# ============================================
UVICORN_WORKERS=4
MAX_REQUEST_SIZE=10485760  # 10MB
REQUEST_TIMEOUT=60
RATE_LIMIT_PER_MINUTE=100

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/mining-ml/api.log

# ============================================
# NOTES
# ============================================
# 1. Replace ALL "CHANGE_THIS_*" values before deployment
# 2. Use strong passwords (minimum 16 characters, mix of letters/numbers/symbols)
# 3. Keep this file secure - DO NOT commit to Git
# 4. For production, use a secrets manager (AWS Secrets Manager, HashiCorp Vault)
# 5. Rotate API keys and passwords regularly (every 90 days)
